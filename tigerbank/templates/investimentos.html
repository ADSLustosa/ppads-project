
{% extends 'base.html' %}
{% block title %}ðŸ“ˆ Investimentos - Tiger Bank{% endblock %}
{% block content %}
<div class="card">
  <h2>ðŸ“ˆ Investimentos</h2>
  <form method="post">
    <div class="form-group">
      <label>Produto</label>
      <select name="produto" required>
        {% for key, p in produtos.items() %}
        <option value="{{ key }}">{{ p.name if p.name else p['name'] }} ({{ (p.rate if p.rate is defined else p['rate'])*100 }}%/m)</option>
        {% endfor %}
      </select>
    </div>
    <div class="form-group"><label>Valor</label><input type="number" step="0.01" min="100" name="valor" required></div>
    <div class="form-group"><label>PerÃ­odo (meses)</label>
      <select name="meses" required><option>3</option><option>6</option><option>12</option><option>24</option></select>
    </div>
    <button class="btn btn-success" type="submit">INVESTIR</button>
    <a class="btn btn-secondary" href="{{ url_for('dashboard.index') }}">VOLTAR</a>
  </form>
</div>

{% if investimentos %}
  <div class="card">
    <h2>ðŸ’¼ Seus Investimentos</h2>
    {% for inv in investimentos if inv.active %}
      <div class="investment-card">
        <h3>{{ inv.product }}</h3>
        <p>Principal: R$ {{ '%.2f'|format(inv.principal|float) }} | Prazo: {{ inv.months }} meses</p>
        <form method="post" action="{{ url_for('tx.resgatar', inv_id=inv.id) }}">
          <button class="btn btn-warning" type="submit">RESGATAR</button>
        </form>
      </div>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
