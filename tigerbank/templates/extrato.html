{% extends 'base.html' %}
{% block title %}ğŸ“„ Extrato - Tiger Bank{% endblock %}

{% block header %}
<div class="profile-header">
    <img class="perfil-icon" src="{{ url_for('static', filename='img/tigre.png') }}" alt="Ãcone do Tigre">
    <h1>Extrato</h1>
    <nav>
        <a class="btn btn-secondary" href="{{ url_for('dashboard.index') }}">VOLTAR</a>
    </nav>
</div>
{% endblock %}

{% block content %}

<div class="card extract-card">

    <h2 class="extract-title">
        <span>ğŸ“‘</span> Extrato
    </h2>

    {% if txs %}
        {% for tx in txs %}

            {% set is_credit = tx.amount > 0 %}
            {% set cor = 'credit' if is_credit else 'debit' %}
            {% set sinal = '+' if is_credit else '-' %}

            <div class="extract-item {{ cor }}">

                <div class="extract-header">
                    <span class="extract-icon">ğŸ—“ï¸</span>
                    <span class="extract-date">
                        {{ tx.created_at.strftime('%d/%m/%Y %H:%M') }}
                    </span>
                </div>

                <div class="extract-body">

                    <div class="extract-kind">
                        {{ tx.kind }}
                    </div>

                    <div class="extract-value {{ cor }}">
                        {{ sinal }} R$ {{ '%.2f'|format(tx.amount|float|abs) }}
                    </div>

                    {% if tx.description %}
                        <div class="extract-description">
                            {{ tx.description }}
                        </div>
                    {% endif %}

                    <div class="extract-balance">
                        ğŸ’° <strong>Saldo apÃ³s: R$ {{ '%.2f'|format(tx.balance_after|float) }}</strong>
                    </div>
                </div>
            </div>

        {% endfor %}
    {% else %}
        <p class="extract-empty">Nenhuma transaÃ§Ã£o registrada.</p>
    {% endif %}

</div>

{% endblock %}
