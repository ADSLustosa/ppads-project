{% extends 'base.html' %}
{% block title %}ğŸ‘¤ Perfil - Tiger Bank{% endblock %}

{% block header %}
<div class="profile-header">

    <!-- Ãcone -->
    <img class="perfil-icon" src="{{ url_for('static', filename='img/tigre.png') }}" alt="Ãcone do Tigre">

    <!-- TÃ­tulo -->
    <h1>Meu Perfil</h1>

    <!-- BotÃ£o voltar -->
    <nav>
        <a class="btn btn-secondary" href="{{ url_for('dashboard.index') }}">VOLTAR</a>
    </nav>

</div>
{% endblock %}

{% block content %}

<!-- ===================================================== -->
<!-- CARD: MEU PERFIL -->
<!-- ===================================================== -->
<div class="card">
    <h2>ğŸ‘¤ Meu Perfil</h2>

    <div class="user-header">
        <div class="user-avatar">{{ current_user.name[0] | upper }}</div>
        <div class="user-info">
            <h3>{{ current_user.name }}</h3>
            <p>Conta {{ current_user.account.type }}</p>
        </div>
    </div>

    <div class="user-data-grid">

        <div class="user-data-item">
            <label>CPF</label>
            <div class="value">{{ current_user.cpf | cpf }}</div>
        </div>

        <div class="user-data-item">
            <label>E-mail</label>
            <div class="value">{{ current_user.email }}</div>
        </div>

        <div class="user-data-item">
            <label>Saldo Atual</label>
            <div class="value">R$ {{ '%.2f'|format(current_user.account.balance | float) }}</div>
        </div>

        <div class="user-data-item">
            <label>Membro desde</label>
            <div class="value">{{ current_user.created_at.strftime('%d/%m/%Y') }}</div>
        </div>

    </div>
</div>


<!-- ===================================================== -->
<!-- EDITAR INFORMAÃ‡Ã•ES -->
<!-- ===================================================== -->
<h3 style="margin:40px 0 20px; text-align:center;">âœï¸ Editar InformaÃ§Ãµes</h3>

<form method="post" action="{{ url_for('profile.update') }}" class="card">

    <!-- Nome -->
    <div class="form-group enhanced-input">
        <label>Nome</label>
        <div class="input-wrapper">
            <span class="input-icon">ğŸ‘¤</span>
            <input type="text" name="name" value="{{ current_user.name }}" required>
        </div>
    </div>

    <!-- Email -->
    <div class="form-group enhanced-input">
        <label>E-mail</label>
        <div class="input-wrapper">
            <span class="input-icon">ğŸ“§</span>
            <input type="email" name="email" value="{{ current_user.email }}" required>
        </div>
    </div>


    <button class="btn btn-success" type="submit">SALVAR</button>
</form>


<!-- ===================================================== -->
<!-- ALTERAR SENHA -->
<!-- ===================================================== -->
<h3 style="margin:40px 0 20px; text-align:center;">ğŸ”’ Alterar Senha</h3>

<form method="post" action="{{ url_for('profile.change_password') }}" class="card">

    <!-- Senha atual -->
    <div class="form-group enhanced-input">
        <label>Senha atual</label>
        <div class="input-wrapper">
            <span class="input-icon">ğŸ”‘</span>
            <input type="password" name="atual" required>
        </div>
    </div>

    <!-- Nova senha -->
    <div class="form-group enhanced-input">
        <label>Nova senha</label>
        <div class="input-wrapper">
            <span class="input-icon">ğŸ›¡ï¸</span>
            <input type="password" name="nova" minlength="8" required>
        </div>
    </div>

    <!-- Confirmar -->
    <div class="form-group enhanced-input">
        <label>Confirmar nova senha</label>
        <div class="input-wrapper">
            <span class="input-icon">ğŸ›¡ï¸</span>
            <input type="password" name="conf" required>
        </div>
    </div>

    <button class="btn btn-primary" type="submit">ALTERAR SENHA</button>
</form>

{% endblock %}
