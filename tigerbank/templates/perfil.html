
{% extends 'base.html' %}
{% block header %}
<h1>🐯 Meu Perfil</h1>
<nav>
    {% if current_user.is_authenticated %}
    <form action="{{ url_for('auth.logout') }}" method="post" style="display:inline">
        <a class="btn btn-secondary" href="{{ url_for('auth.home') }}">VOLTAR</a>
    </form>
    {% endif %}
</nav>
{% endblock %}
{% block title %}👤 Perfil - Tiger Bank{% endblock %}
{% block content %}
<div class="card">
  <h2> 👤 Meu Perfil</h2><br>
  <div class="user-profile-card">
  <div class="user-header">
    <div class="user-avatar">{{ current_user.name[0]|upper }}</div>
    <div class="user-info">
      <h3>{{ current_user.name }}</h3>
      <p>Conta {{ current_user.account.type }}</p>
    </div>
  </div>

  <div class="user-data-grid">
    <div class="user-data-item">
      <label>CPF</label>
      <div class="value">{{ current_user.cpf }}</div>
    </div>
    <div class="user-data-item">
      <label>E-mail</label>
      <div class="value">{{ current_user.email }}</div>
    </div>
    <div class="user-data-item">
      <label>Saldo Atual</label>
      <div class="value">R$ {{ '%.2f'|format(current_user.account.balance|float) }}</div>
    </div>
    <div class="user-data-item">
      <label>Membro desde</label>
      <div class="value">{{ current_user.created_at.year }}</div>
    </div>
  </div>
</div>
  </div>

  <h3 style="margin: 30px 0 20px 0; text-align:center;">✏️ Editar Informações</h3>
  <form method="post" action="{{ url_for('profile.atualizar') }}">
    <div class="form-group"><label>Nome</label><input name="name" value="{{ current_user.name }}" required></div>
    <div class="form-group"><label>E-mail</label><input type="email" name="email" value="{{ current_user.email }}" required></div>
    <div class="form-group"><label>Senha atual</label><input type="password" name="senha_atual" required></div>
    <button class="btn btn-success" type="submit">SALVAR</button>
  </form>

  <h3 style="margin: 30px 0 20px 0; text-align:center;">🔒 Alterar Senha</h3>
  <form method="post" action="{{ url_for('profile.alterar_senha') }}">
    <div class="form-group"><label>Senha atual</label><input type="password" name="atual" required></div>
    <div class="form-group"><label>Nova senha</label><input type="password" name="nova" minlength="8" required></div>
    <div class="form-group"><label>Confirmar nova senha</label><input type="password" name="conf" required></div>
    <button class="btn btn-primary" type="submit">ALTERAR</button>
  </form>
</div>
{% endblock %}
